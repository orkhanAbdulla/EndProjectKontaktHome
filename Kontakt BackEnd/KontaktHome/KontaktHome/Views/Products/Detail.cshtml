@model Product
@{
    ViewData["Title"] = "Detail";
    int count = 1;

}

<main>
    <section id="product-details">
        <div class="container">
            <div class="product-headline">
                <div class="product-status">
                    <p class="success">
                        <img src="https://kontakt.az/wp-content/themes/kontakt7/ktn-assets/assets/check.png" alt="">
                        Məhsul mövcuddur
                    </p>
                    <p>Məhsul kodu: <span>@ViewBag.cod</span></p>
                </div>
                <div class="product-feedback">
                    <button class="feedback-action select-item" id="select-item">
                        <svg viewBox="0 -28 512.001 512" xmlns="http://www.w3.org/2000/svg">
                            <path d="m256 455.515625c-7.289062 0-14.316406-2.640625-19.792969-7.4375-20.683593-18.085937-40.625-35.082031-58.21875-50.074219l-.089843-.078125c-51.582032-43.957031-96.125-81.917969-127.117188-119.3125-34.644531-41.804687-50.78125-81.441406-50.78125-124.742187 0-42.070313 14.425781-80.882813 40.617188-109.292969 26.503906-28.746094 62.871093-44.578125 102.414062-44.578125 29.554688 0 56.621094 9.34375 80.445312 27.769531 12.023438 9.300781 22.921876 20.683594 32.523438 33.960938 9.605469-13.277344 20.5-24.660157 32.527344-33.960938 23.824218-18.425781 50.890625-27.769531 80.445312-27.769531 39.539063 0 75.910156 15.832031 102.414063 44.578125 26.191406 28.410156 40.613281 67.222656 40.613281 109.292969 0 43.300781-16.132812 82.9375-50.777344 124.738281-30.992187 37.398437-75.53125 75.355469-127.105468 119.308594-17.625 15.015625-37.597657 32.039062-58.328126 50.167969-5.472656 4.789062-12.503906 7.429687-19.789062 7.429687zm-112.96875-425.523437c-31.066406 0-59.605469 12.398437-80.367188 34.914062-21.070312 22.855469-32.675781 54.449219-32.675781 88.964844 0 36.417968 13.535157 68.988281 43.882813 105.605468 29.332031 35.394532 72.960937 72.574219 123.476562 115.625l.09375.078126c17.660156 15.050781 37.679688 32.113281 58.515625 50.332031 20.960938-18.253907 41.011719-35.34375 58.707031-50.417969 50.511719-43.050781 94.136719-80.222656 123.46875-115.617188 30.34375-36.617187 43.878907-69.1875 43.878907-105.605468 0-34.515625-11.605469-66.109375-32.675781-88.964844-20.757813-22.515625-49.300782-34.914062-80.363282-34.914062-22.757812 0-43.652344 7.234374-62.101562 21.5-16.441406 12.71875-27.894532 28.796874-34.609375 40.046874-3.453125 5.785157-9.53125 9.238282-16.261719 9.238282s-12.808594-3.453125-16.261719-9.238282c-6.710937-11.25-18.164062-27.328124-34.609375-40.046874-18.449218-14.265626-39.34375-21.5-62.097656-21.5zm0 0"></path>
                        </svg>
                    </button>
                    <input type="hidden" id="ProductId" value="@Model.Id" />
                    <button class="feedback-action compare-button" data-id="50244" data-mid="0026196" data-price="1099.99">
                        <img src="https://kontakt.az/wp-content/themes/kontakt7/ktn-assets/assets/comparisonnew2.png" style="width:21px">
                    </button>
                </div>
            </div>
            <div id="product-info">
                <div class="product-slider">

                    <div class="images">
                        @for (int i = 0; i < Model.Images.Count; i++)
                        {
                            <div class="item">
                                <a>
                                    <img src="~/img/products/@Model.Images[i].Image" class="img-fluid detail-img">
                                </a>
                            </div>
                        }


                    </div>
                    <div class="base-image">
                        <div class="imgContainer">
                            <a>
                                <img src="~/img/products/@Model.Images[0].Image" class="img-fluid" id="main-detail-image">
                            </a>
                        </div>
                    </div>
                </div>
                <form class="product-features">
                    <div class="wrapper">
                        <div class="feature-container">
                            <h1 class="title">@Model.Name</h1>
                            <img class="undertitle_icon" src="https://kontakt.az/wp-content/uploads/2021/03/1.png" style="height: 34.8px;">
                            <a class="undertitle_icon_a" href="https://kontakt.az/en-serfeli-qiymetle-120-zemanet/" target="_blank">
                                <img class="undertitle_icon undertitle_icon_2" src="https://kontakt.az/wp-content/uploads/2021/03/2.png" data-placement="top" data-toggle="popover" data-html="true" data-content="Məhsul rəsmi şəbəkələrdə daha ucuz olduğu halda fərq 120% geri ödənilir. <i class='fa fa-close fa-closep fa-closep120'></i>" data-original-title="" title="">
                            </a>
                            <img class="undertitle_icon" src="https://kontakt.az/wp-content/uploads/2021/03/visaaz.png" style="height: 34.8px;">
                            <div class="feature">
                                <div class="labels">
                                    <a href="#" data-toggle="tooltip" data-placement="bottom" class="lbl-box-new" data-html="true" title="" data-original-title="<p>Nağd alışda endirim.</p>">
                                        <img src="https://kontakt.az/wp-content/themes/kontakt7/ktn-assets/assets/badges/gray-nagd.png" alt="">
                                    </a>
                                    <a href="#" data-toggle="tooltip" data-placement="bottom" class="lbl-box-new temporary_hidden" data-html="true" title="" data-original-title="<p>Sürətli çatdırılma imkanı.</p>">
                                        <img src="https://kontakt.az/wp-content/themes/kontakt7/ktn-assets/assets/badges/gray-express.png" alt="">
                                    </a>
                                    <a href="#" data-toggle="tooltip" data-placement="bottom" class="lbl-box-new" data-html="true" title="" data-original-title="<p>Kartla ödəmə imkanı.</p>">
                                        <img src="https://kontakt.az/wp-content/themes/kontakt7/ktn-assets/assets/badges/gray-kart.png" alt="">
                                    </a>
                                    <a href="#" data-toggle="tooltip" data-placement="bottom" class="lbl-box-new" data-html="true" title="" data-original-title="<p>Online ödəmə imkanı.</p>">
                                        <img src="https://kontakt.az/wp-content/themes/kontakt7/ktn-assets/assets/badges/gray-online.png" alt="">
                                    </a>
                                    <a href="#" data-toggle="tooltip" data-placement="bottom" class="lbl-box-new" data-html="true" title="" data-original-title="<p>Qapıda ödəmə imkanı.</p>">
                                        <img src="https://kontakt.az/wp-content/themes/kontakt7/ktn-assets/assets/badges/gray-qapida.png" alt="">
                                    </a>
                                </div>
                            </div>
                            <div class="cont-price">
                                <div class="calculator-responsive-select-mother">
                                    <div class="price">
                                        <small class="qiymeti  qiymeti_endirim">
                                            qiyməti
                                        </small>
                                        @if (Model.Discount > 0)
                                        {
                                            <p class="endirimvar">
                                                <span style="text-decoration: line-through; font-weight: normal; color:#282828; ">@Model.Price<small class="azn_span">₼</small></span><br><span class="nprice" id="price-327650">@(Model.Price-((Model.Price * Model.Discount) / 100))<small class="azn_span">₼</small></span>
                                            </p>
                                        }
                                        else
                                        {
                                            <p class="p-price"><span class="nprice" id="price-751190">@Model.Price</span> <small class="azn_span">₼</small></p>
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mop">
                        <button type="button" class="btn-add-to-cart" id="AddBasket">Səbətə at</button>
                        <input type="hidden" id="ProductId" value="@Model.Id" />
                    </div>
                </form>
            </div>
        </div>
        </div>
    </section>
    <section id="tabs">
        <div class="container">
            <div class="nav">
                <a> Xüsusiyyətlər</a>
            </div>
            <div class="tab-content">
                <div class="row">
                    <div class="col-lg-4 pr-0">
                        <ul class="features-review-tabs">
                            @{
                                foreach (ProductFeatures pf in Model.ProductFeatures)
                                {
                                    if (count % 2 == 0)
                                    {
                                        <li>
                                            @pf.FeaturesDetail.Features.Name
                                        </li>
                                    }
                                    else
                                    {
                                        <li class="gray-line">
                                            @pf.FeaturesDetail.Features.Name
                                        </li>

                                    }
                                    count++;
                                }

                            }


                        </ul>
                    </div>
                    <div class="col-lg-8 pl-0">
                        <ul class="features-review-tabs submenuItems_params">
                            @{
                                foreach (ProductFeatures pf in Model.ProductFeatures)
                                {
                                    if (count % 2 == 0)
                                    {
                                        <li>
                                            @pf.FeaturesDetail.Description
                                        </li>
                                    }
                                    else
                                    {
                                        <li class="gray-line">
                                            @pf.FeaturesDetail.Description
                                        </li>

                                    }
                                    count++;
                                }

                            }
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>
</main>
@section Script{
    <script>

        $(document).ready(function () {
            $(document).ready(function () {
                $(document).on("click", "#AddBasket", function () {
                    var productId = $(this).next().val();
                    alertify.set('notifier', 'delay', 1);
                    alertify.set('notifier', 'position', 'bottom-center');
                    alertify.error('İcra edildi!');
                    $.ajax({
                        url: "/Products/AddBasket?id=" + productId,
                        type: "Get",
                        success: function (res) {
                            $(".cart_count").empty();
                            $(".cart_count").append(res);
                        }
                    });
                });
            })
        })
        $(document).ready(function () {
            $(document).ready(function () {
                $(document).on("click", "#select-item", function () {
                    var productId = $(this).next().val();
                    alertify.set('notifier', 'delay', 1);
                    alertify.set('notifier', 'position', 'bottom-center');
                    alertify.error('İcra edildi!');
                    $.ajax({
                        url: "/Products/AddSelect?id=" + productId,
                        type: "Get",
                        success: function (res) {
                            $(".watchlist_count").empty();
                            $(".watchlist_count").append(res);
                        }
                    });
                });
            })
        })

    </script>
}

